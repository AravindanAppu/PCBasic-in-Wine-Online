<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PC-BASIC in DOSBox-X WASM</title>
<style>
    body { margin:0; padding:0; background:#000; display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; color:white; }
    #dosbox-container { width: 800px; height: 600px; border:2px solid #333; background:#000; }
    #dropArea { width:300px; height:100px; border:2px dashed #fff; margin-top:20px; display:flex; align-items:center; justify-content:center; cursor:pointer; }
</style>
</head>
<body>
<h2>PC-BASIC in DOSBox-X WASM</h2>
<div id="dosbox-container"></div>
<div id="dropArea">Drag & Drop ZIP / EXE here</div>

<script src="https://rawcdn.githack.com/nbarkhina/DosWasmX/master/dist/main.js"></script>
<script>
(async () => {
    // Initialize DOSBox-X WASM
    const app = new DosWasmX.DosWasmX({
        canvas: document.getElementById('dosbox-container'),
        memorySizeMB: 64
    });

    await app.start(); // Start the emulator

    // Drag and drop
    const dropArea = document.getElementById('dropArea');
    dropArea.addEventListener('dragover', e => { e.preventDefault(); dropArea.style.background="#222"; });
    dropArea.addEventListener('dragleave', e => { dropArea.style.background=""; });
    dropArea.addEventListener('drop', async e => {
        e.preventDefault();
        dropArea.style.background="";
        const files = e.dataTransfer.files;
        for (let file of files) {
            const arrayBuffer = await file.arrayBuffer();
            // Load ZIP or EXE into DOSBox
            await app.loadRom(arrayBuffer, file.name);
        }
    });

    // Auto load PC-BASIC from ZIP (optional)
    // fetch("pcbassic.zip").then(r=>r.arrayBuffer()).then(buf => app.loadRom(buf, "pcbassic.zip"));
})();
</script>
</body>
</html>
