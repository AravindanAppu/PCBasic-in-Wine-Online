<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>GWBASIC in DOSBox-X</title>
  <script src="https://unpkg.com/dosbox-x@latest/dist/dosbox-x.min.js"></script>
</head>
<body>
  <div id="dosbox-container" style="width:800px; height:600px;"></div>
  <input type="file" id="zipInput" accept=".zip" />

  <script>
    document.getElementById('zipInput').addEventListener('change', function(event) {
      const file = event.target.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = function(e) {
        const arrayBuffer = e.target.result;

        // Initialize DOSBox-X
        const dosbox = new Dosbox({
          id: "dosbox-container",
          onload: async function(dosbox) {
            // Mount the ZIP file as drive C
            await dosbox.mount({
              mountpoint: "c",
              type: "zip",
              data: arrayBuffer
            });

            // Switch to C: and run GWBASIC
            dosbox.run("c:");
            dosbox.run("GWBASIC.EXE");

            // You can also auto-load a BAS file inside BASIC with:
            // dosbox.run("LOAD \"YOUR_FILE.BAS\"");
          }
        });

        dosbox.start();
      };

      reader.readAsArrayBuffer(file);
    });
  </script>
</body>
</html>
